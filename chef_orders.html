<!DOCTYPE html>
<html lang="en-IN">
<head>
    <title>Chef Orders</title>
    <meta charset="UTF-8">
    <style>
        /* Basic styling for the table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <h1>Chef Orders</h1>
    <div id="orders-container">
        </div>

    <script>
        // Replace with your actual Firebase configuration (same as in menu.html)
        const firebaseConfig = {
          apiKey: "AIzaSyAkwiKjPYsv4LlRQLTxH6kj15xlCnvoXKA",
          authDomain: "testmenu-4ed51.firebaseapp.com",
          projectId: "testmenu-4ed51",
          storageBucket: "testmenu-4ed51.firebasestorage.app",
          messagingSenderId: "98263305480",
          appId: "1:98263305480:web:024158941cb5f53225f0bd",
          measurementId: "G-CX0JDH1RDP"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Initialize Firestore
        const db = firebase.firestore();

        const ordersContainer = document.getElementById('orders-container');

        // Function to display orders
        function displayOrders(ordersByTable) {
            ordersContainer.innerHTML = ''; // Clear existing content
            for (const tableNumber in ordersByTable) {
                const tableOrders = ordersByTable[tableNumber];
                const tableDiv = document.createElement('div');
                tableDiv.innerHTML = `<h2>Table ${tableNumber}</h2>`;
                const table = document.createElement('table');
                const thead = document.createElement('thead');
                thead.innerHTML = '<tr><th>Item</th><th>Quantity</th><th>Price</th></tr>';
                table.appendChild(thead);
                const tbody = document.createElement('tbody');
                tableOrders.forEach(orderData => {
                    orderData.order.forEach(item => {
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${item.name}</td><td>${item.quantity}</td><td>â‚¹${item.price.toFixed(2)}</td>`;
                        tbody.appendChild(row);
                    });
                });
                table.appendChild(tbody);
                tableDiv.appendChild(table);
                ordersContainer.appendChild(tableDiv);
            }
        }

        // Fetch orders from Firestore and listen for real-time updates
        db.collection("orders").orderBy("timestamp", "desc")
            .onSnapshot((querySnapshot) => {
                const ordersByTable = {};
                querySnapshot.forEach((doc) => {
                    const orderData = doc.data();
                    const tableNumber = orderData.tableNumber;
                    if (ordersByTable[tableNumber]) {
                        ordersByTable[tableNumber].push(orderData);
                    } else {
                        ordersByTable[tableNumber] = [orderData];
                    }
                });
                displayOrders(ordersByTable);
            });
    </script>
</body>
</html>
